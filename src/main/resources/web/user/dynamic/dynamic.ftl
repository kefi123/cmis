<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>发现</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/extra.css">
    <link rel="stylesheet" type="text/css" href="css/webuploader.css">
    <script src="js/jquery-1.12.1.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/webuploader.js"></script>
</head>
<body style="background-color:#f9f9f9;">
    <div class="container excontainer">
    	<div class="row" style="background-color:#fff;margin-top:50px;border-bottom:1px solid #eeeeee;">
			<div class="col-md-10 col-md-offset-1">
				<h4 style="color:#2aabd2;margin-top:20px;">发布动态~</h4>
    				<div class="form-group">
    					<textarea id="dynamic_content" name="dynamic_content" style="height:100px;" class="form-control" placeholder="说你所想..."></textarea>
    				</div>
    				<div class="form-group" style="margin-top:30px;">
						<!--webupload多图片预览上传-->
						<div id="fileList" name="fileList" class="uploader-list row"></div>
					    <div class="row">
					    	<div id="filePicker" class="col-md-3">选择图片(最多:2)</div>
    						<button id="release" name="release" class="btn btn-primary col-md-2 col-md-offset-7">发布</button>
					    </div>
    				</div>
    		</div>
    	</div>
        <div class="row">
            <div class="col-md-12 items" >
                <div class="col-md-12 item">
                    <div class="row">
                        <div class="col-md-2">
                            <img src="images2/avatar.jpg" class="img-circle img-responsive item-avatar" alt="avatar" />
                        </div>
                        <div class="col-md-10 item-detail">
                            <div class="row">
                                <div class="col-md-12">
                                    <span class="username">阿紫</span><span class="userdetail">&nbsp;&nbsp;&nbsp;杭州蒲公英数据科技有限公司产品部负责人</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <span class="userdetail">北京 设计 19-04-12 08:41</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <p>关于标点符号问题。</p>
                                    <p>PM让我把标点符号删了，但是我觉得应该留下，标点符号使用来表达语气和情感的，如果去掉觉得语气有些冷冰冰的。</p>
                                    <p> 大家觉得该删掉吗？</p>

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <img src="images2/dt01.jpg" class="img-rounded img-responsive dt-img" />
                                </div>
                            </div>
                            <div class="row item-bottom">
                                <div class="col-md-2">
                                    <img src="images2/like_icon.png" class="img-responsive item-bottom-img" />
                                    <span class="item-bottom-text">16</span>
                                </div>
                                <div class="col-md-2 col-md-offset-3">
                                    <img src="images2/comment_icon.png" class="img-responsive item-bottom-img" />
                                    <span class="item-bottom-text">21</span>
                                </div>
                                <div class="col-md-2 col-md-offset-3">
                                    <img src="images2/share_icon.png" class="img-responsive item-bottom-img" />
                                    <span class="item-bottom-text">分享</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="col-md-12 item">
                    <div class="row">
                        <div class="col-md-2">
                            <img src="images2/avatar2.jpg" class="img-circle img-responsive item-avatar" alt="avatar" />
                        </div>
                        <div class="col-md-10 item-detail">
                            <div class="row">
                                <div class="col-md-12">
                                    <span class="username">郝梦淇 </span>
                                    <span class="userdetail">&nbsp;&nbsp;&nbsp;北京和利时数字技术有限公司UI设计</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <span class="userdetail">北京 设计 19-04-12 08:41</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <p>test,还好只发了一条。</p>

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <img src="images2/dt02.jpg" class="img-rounded img-responsive dt-img" />
                                </div>
                            </div>
                            <div class="row item-bottom">
                                <div class="col-md-2">
                                    <img src="images2/like_icon.png" class="img-responsive item-bottom-img" />
                                    <span class="item-bottom-text">16</span>
                                </div>
                                <div class="col-md-2 col-md-offset-3">
                                    <img src="images2/comment_icon.png" class="img-responsive item-bottom-img" />
                                    <span class="item-bottom-text">21</span>
                                </div>
                                <div class="col-md-2 col-md-offset-3">
                                    <img src="images2/share_icon.png" class="img-responsive item-bottom-img" />
                                    <span class="item-bottom-text">分享</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-12 item">
                    <div class="row">
                        <div class="col-md-2">
                            <img src="images2/avatar3.jpg" class="img-circle img-responsive item-avatar" alt="avatar" />
                        </div>
                        <div class="col-md-10 item-detail">
                            <div class="row">
                                <div class="col-md-12">
                                    <span class="username">李士洪 </span>
                                    <span class="userdetail">&nbsp;&nbsp;&nbsp; 中国社会扶贫网产品经理</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <span class="userdetail">北京 产品 19-04-04 20:08</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <p>中央电视台招个聘还去中央新闻宣传一波？这波操作666</p>

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <img src="images2/dt0301.jpg" class="img-rounded img-responsive dt-img" />
                                    <img src="images2/dt0302.jpg" class="img-rounded img-responsive dt-img" />
                                </div>
                            </div>
                            <div class="row item-bottom">
                                <div class="col-md-2">
                                    <img src="images2/like_icon.png" class="img-responsive item-bottom-img" />
                                    <span class="item-bottom-text">16</span>
                                </div>
                                <div class="col-md-2 col-md-offset-3">
                                    <img src="images2/comment_icon.png" class="img-responsive item-bottom-img" />
                                    <span class="item-bottom-text">21</span>
                                </div>
                                <div class="col-md-2 col-md-offset-3">
                                    <img src="images2/share_icon.png" class="img-responsive item-bottom-img" />
                                    <span class="item-bottom-text">分享</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-12 item">
                    <div class="row">
                        <div class="col-md-2">
                            <img src="images2/avatar4.jpg" class="img-circle img-responsive item-avatar" alt="avatar" />
                        </div>
                        <div class="col-md-10 item-detail">
                            <div class="row">
                                <div class="col-md-12">
                                    <span class="username">刘维</span><span class="userdetail">&nbsp;&nbsp;&nbsp;作业帮互联网策略产品经理</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <span class="userdetail">北京 产品 19-04-13 08:21</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <p>现在的求职者太会说话了</p>
                                    <p>拒绝了offer也让人气不起来</p>

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <img src="images2/dt04.jpg" class="img-rounded img-responsive dt-img" />
                                </div>
                            </div>
                            <div class="row item-bottom">
                                <div class="col-md-2">
                                    <img src="images2/like_icon.png" class="img-responsive item-bottom-img" />
                                    <span class="item-bottom-text">16</span>
                                </div>
                                <div class="col-md-2 col-md-offset-3">
                                    <img src="images2/comment_icon.png" class="img-responsive item-bottom-img" />
                                    <span class="item-bottom-text">21</span>
                                </div>
                                <div class="col-md-2 col-md-offset-3">
                                    <img src="images2/share_icon.png" class="img-responsive item-bottom-img" />
                                    <span class="item-bottom-text">分享</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!--WebUpload插件js代码部分-->
    <script>
    	jQuery(function() {
		    var $ = jQuery,
		        $list = $('#fileList'),
		        // 优化retina, 在retina下这个值是2
		        ratio = window.devicePixelRatio || 1,
		        // 缩略图大小
		        thumbnailWidth = 60,
		        thumbnailHeight = 60,
		        // Web Uploader实例
		        uploader;
		    // 初始化Web Uploader
		    uploader = WebUploader.create({
		        // 自动上传。
		        auto: false,
		        // swf文件路径
		        // swf文件路径
		        swf:  'js/Uploader.swf',
		        // 文件接收服务端。
		        server: 'http://localhost:8080/storageDynamicPic',
		        threads:'5',        //同时运行5个线程传输
		        fileNumLimit:'2',  //文件总数量只能选择10个，我们只需要一个，所以我选的1
		
		        // 选择文件的按钮。可选。
		        pick: {id:'#filePicker',  //选择文件的按钮
		            multiple:true},   //允许可以同时选择多个图片
		        // 图片质量，只有type为`image/jpeg`的时候才有效。
		        quality: 90,
		
		        //限制传输文件类型，accept可以不写
		        accept: {
		            title: 'Images',//描述
		            extensions: 'gif,jpg,jpeg,bmp,png',//类型
		            mimeTypes: 'image/*'//mime类型
		        }
		    });
		
		
		    // 当有文件添加进来的时候，创建img显示缩略图使用
		    uploader.on( 'fileQueued', function( file ) {
		        var $li = $(
		            '<div id="' + file.id + '" class="file-item thumbnail col-md-1">' +
		                '<img>' +
		                '<div class="info" style="color:#515151;font-size:12px;">' + file.name + '</div>' +
		            '</div>'
		            ),
		        $img = $li.find('img');
		
		        // $list为容器jQuery实例
		        $list.append( $li );
		
		        // 创建缩略图
		        // 如果为非图片文件，可以不用调用此方法。
		        // thumbnailWidth x thumbnailHeight 为 100 x 100
		        uploader.makeThumb( file, function( error, src ) {
		            if ( error ) {
		                $img.replaceWith('<span>不能预览</span>');
		                return;
		            }
		
		            $img.attr( 'src', src );
		        }, thumbnailWidth, thumbnailHeight );
		    });
		
			//点击发布按钮发布动态内容
			$("#release").click(function(){
				
				//点击发布时获取内容
				var content=$("#dynamic_content").val();
				
			    //通过Ajax把信息传到服务器
				$.ajax({
		            url: "storageDynamicContent",
		            type: "POST",
		            data: {
		            	dynamic_content:content
		            }
		        });
		        uploader.upload();   //执行手动提交
		        
		        //清空内容
		        $("#dynamic_content").val("");
		        $("#fileList").empty();
			});
		});
    </script>
</body>
</html>